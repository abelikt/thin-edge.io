2022-02-07 14:14:22,900 INFO  ==============================================================
2022-02-07 14:14:22,900 INFO  Id:    agent_init_session
2022-02-07 14:14:22,901 INFO  Dir:   tedge_agent/
2022-02-07 14:14:22,901 INFO  Title: Validate tedge agent init session feature
2022-02-07 14:14:22,902 DEBUG Execution order hint: 0.0
2022-02-07 14:14:22,902 INFO  ==============================================================
2022-02-07 14:14:22,907 DEBUG Process parameters for sudo<remove_lock>
  command line : /usr/bin/sudo rm -rf /var/lock/tedge_agent.lock
    arg #1     : rm
    arg #2     : -rf
    arg #3     : /var/lock/tedge_agent.lock
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/remove_lock.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/remove_lock.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:22,913 DEBUG Waiting up to 600 secs for process sudo<remove_lock> (pid 21299)
2022-02-07 14:14:23,218 INFO  Executed sudo<remove_lock>, exit status 0
2022-02-07 14:14:23,219 DEBUG --- test execute
2022-02-07 14:14:23,221 DEBUG Process parameters for sudo<agent_clear>
  command line : /usr/bin/sudo /usr/bin/tedge_agent --clear
    arg #1     : /usr/bin/tedge_agent
    arg #2     : --clear
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_clear.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_clear.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:23,229 DEBUG Waiting up to 600 secs for process sudo<agent_clear> (pid 21301)
2022-02-07 14:14:23,534 INFO  Executed sudo<agent_clear>, exit status 0
2022-02-07 14:14:23,536 DEBUG Process parameters for sudo<agent_init>
  command line : /usr/bin/sudo /usr/bin/tedge_agent --init
    arg #1     : /usr/bin/tedge_agent
    arg #2     : --init
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_init.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_init.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:23,541 DEBUG Waiting up to 600 secs for process sudo<agent_init> (pid 21308)
2022-02-07 14:14:23,846 INFO  Executed sudo<agent_init>, exit status 0
2022-02-07 14:14:23,848 DEBUG Process parameters for sudo<pub_req>
  command line : /usr/bin/sudo /usr/bin/tedge mqtt pub --qos 1 tedge/commands/req/software/list '{"id":"Ld3KgqpcLDlrYH6sfpG7w"}'
    arg #1     : /usr/bin/tedge
    arg #2     : mqtt
    arg #3     : pub
    arg #4     : --qos
    arg #5     : 1
    arg #6     : tedge/commands/req/software/list
    arg #7     : {"id":"Ld3KgqpcLDlrYH6sfpG7w"}
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/pub_req.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/pub_req.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:23,854 DEBUG Waiting up to 600 secs for process sudo<pub_req> (pid 21315)
2022-02-07 14:14:24,160 INFO  Executed sudo<pub_req>, exit status 0
2022-02-07 14:14:24,162 DEBUG Process parameters for sudo<sub_resp>
  command line : /usr/bin/sudo /usr/bin/tedge mqtt sub tedge/commands/res/software/list
    arg #1     : /usr/bin/tedge
    arg #2     : mqtt
    arg #3     : sub
    arg #4     : tedge/commands/res/software/list
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/sub_resp.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/sub_resp.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:24,170 INFO  Started sudo<sub_resp> with process id 21318
2022-02-07 14:14:24,176 DEBUG Process parameters for sudo<agent_start>
  command line : /usr/bin/sudo /usr/bin/systemctl start tedge-agent
    arg #1     : /usr/bin/systemctl
    arg #2     : start
    arg #3     : tedge-agent
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_start.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_start.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:24,184 DEBUG Waiting up to 600 secs for process sudo<agent_start> (pid 21319)
2022-02-07 14:14:24,542 INFO  Executed sudo<agent_start>, exit status 0
2022-02-07 14:14:24,542 INFO  Waiting for 2.0 seconds
2022-02-07 14:14:26,546 DEBUG Process parameters for sudo<agent_stop>
  command line : /usr/bin/sudo /usr/bin/systemctl stop tedge-agent
    arg #1     : /usr/bin/systemctl
    arg #2     : stop
    arg #3     : tedge-agent
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_stop.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/agent_stop.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:26,552 DEBUG Waiting up to 600 secs for process sudo<agent_stop> (pid 21350)
2022-02-07 14:14:26,856 INFO  Executed sudo<agent_stop>, exit status 0
2022-02-07 14:14:26,857 DEBUG Process parameters for sudo<sub_stop>
  command line : /usr/bin/sudo killall tedge
    arg #1     : killall
    arg #2     : tedge
  working dir  : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux
  stdout       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/sub_stop.out
  stderr       : /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/sub_stop.err
  environment  : LD_LIBRARY_PATH=/usr/lib
  environment  : PATH=/bin:/usr/bin:/usr/sbin:/usr/local/bin
                   #1  /bin
                   #2  /usr/bin
                   #3  /usr/sbin
                   #4  /usr/local/bin
2022-02-07 14:14:26,862 DEBUG Waiting up to 600 secs for process sudo<sub_stop> (pid 21352)
2022-02-07 14:14:27,167 INFO  Executed sudo<sub_stop>, exit status 0
2022-02-07 14:14:27,168 DEBUG --- test validate
2022-02-07 14:14:27,169 DEBUG Performing regex contains=True grep on file: /home/pi/actions-runner/_work/thin-edge.io/thin-edge.io/tests/PySys/tedge_agent/agent_init_session/Output/linux/sub_resp.out
2022-02-07 14:14:27,174 DEBUG Grep on input file sub_resp.out successfully matched expression "Ld3KgqpcLDlrYH6sfpG7w" with line: '[tedge/commands/res/software/list] {"id":"Ld3KgqpcLDlrYH6sfpG7w","status":"executing"}\n'
2022-02-07 14:14:27,176 INFO  Grep on input file sub_resp.out ... passed
2022-02-07 14:14:27,182 DEBUG --- test cleanup
2022-02-07 14:14:27,184 DEBUG ProcessUser cleanup function done.
2022-02-07 14:14:27,188 INFO  
2022-02-07 14:14:27,188 INFO  Test duration: 4.29 secs
2022-02-07 14:14:27,189 INFO  Test final outcome:  PASSED
2022-02-07 14:14:27,190 INFO  
